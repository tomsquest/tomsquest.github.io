<!doctype html>
<html>
<head>
    <meta charset="utf-8">

    <title>Working Effectively with Unit Tests by Jay Fields &ndash; Thomas Queste&#39;s blog</title>
    <meta name="description" content="Thomas Queste's blog">
    <meta content="Thomas Queste" name="author">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:title" content="Working Effectively with Unit Tests by Jay Fields">
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="2015-03-20">
    <meta property="og:url" content="https://www.tomsquest.com/blog/2015/03/working-effectively-with-unit-tests/">
    <meta property="og:description" content="">
    <meta property="og:site_name" content="Thomas Queste&#39;s blog">

    <link rel="apple-touch-icon" href="/apple-touch-icon.png">

    <link href="/css/normalize.min.css?v=5" rel="stylesheet">

    
    <link href="https://www.tomsquest.com/main.min.2819cd2d5f418ae2c8422ef6b09057fadaf8dfcbb15d1f49a3d1f752f4fb463f.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:700|Noto+Serif" rel="stylesheet">

    </head>
<body>
<div class="header-container">
    <header class="wrapper clearfix">
        <a class="title" href="https://www.tomsquest.com/" title="homepage">
            <img alt="Logo" src="/img/logo.png"/>
        </a>
        <nav>
            <a href="/" title="Go to Blog">BLOG</a>
            <a href="/about" title="Go to the About me page">ABOUT</a>
        </nav>
    </header>
</div>

<div class="main-container">
    <div class="main wrapper clearfix">
        
<div class="post">
    <article>
        <header>
            <a href="https://www.tomsquest.com/blog/2015/03/working-effectively-with-unit-tests/">
                <h1>Working Effectively with Unit Tests by Jay Fields</h1>
            </a>
            <p>2015-03-20 - Thomas Queste</p>
        </header>
        <section>
            

<p><img src="/img/posts/wewut-cover.jpg" alt="Book cover" /></p>

<p>I am very happy to have read Jay Fields&rsquo; Working effectively with unit tests.
This is a rare book where developers are taught how to be better at a very-argued discipline: testing.</p>

<p>Jay Fields explains its opinions on how he tests, what he tests and how best he thinks
testing can be done. This is a rare event when somebody explains directly how and why
he write code like that. In my professional life, events like that are not so common,
especially when they are prepared and arguments well presented.</p>

<p>Here are some of my notes :</p>

<h2 id="best-practices">Best practices</h2>

<ul>
<li>Better to have N tests than a single test with a loop</li>
<li>Inline setup is better that referencing a variable</li>
<li>Test names are comments under cover, they will mislead</li>
<li>Data builders is better than globally-defined object with default values (Object Mother)</li>
</ul>

<h2 id="readability">Readability</h2>

<p>Each method added to a test complicates the tiny universe of the tests.
It is hard to know which abstraction will reduce the complexity and provide value.
Being DRY in tests does more harm than good, so repeating ourselves may be better for readability.</p>

<h2 id="roi">ROI</h2>

<p>&ldquo;Productively Unit Testing&rdquo; is evaluating the cost of writing and maintaining a test.
It is acceptable to delete a test after a TDD session or during a code review, if
the value of the test does not seem positive.</p>

<p>Test what seems fragile and is expected to change, ignore the rest.</p>

<h2 id="test-names">Test names</h2>

<p>Test names are comments. They degrade with time, they may be wrong or worse they may mislead.</p>

<p>And, it is rare when a test name tells you what is going wrong. It will just indicate where to
first look at (the body of the test method). So test names are just pointer to code. <strong>The shorter, the better.</strong></p>

<p>&ldquo;Implementation over-specification&rdquo; means a test is fragile because it knows too much about what
it is trying to verify, and that a small change in the production code will break the test.</p>

<p>Solutions are to relax prepartion with Mockito&rsquo;s anyString/anyLong/&hellip; ; Null as a return value is acceptable.</p>

<p>It is simpler and more readable to compare a literal (aka primitive) value, than objects together.</p>

<p>To avoid cascading failures, he only knows two solutions :</p>

<ul>
<li>make the tests more intelligent</li>
<li>make the tests more ignorant.</li>
</ul>

<h2 id="coverage">Coverage</h2>

<p>He aims for 80% of coverage. Going for more that 80% is most likely that the motivation is a better greater number and not the ROI.</p>

<p>Don&rsquo;t forget that it&rsquo;s easy to fake a good coverage with tests without assertion&hellip;</p>

<h2 id="broad-stack-test">Broad Stack Test</h2>

<p>These are End-to-End tests. They are complex and fragile.</p>

<p>He recommends that these tests will survive only if this is the author who maintains them and
not the whole team. And if the author leaves, the time will be best invested recreating those
tests than to try to fix them. I couldn&rsquo;t agree more.</p>

<p>His Mike Cohn Test pyramid is divided into: 1 to 12 Broad Stack Tests, 20% of &ldquo;sociable&rdquo; tests
(tests that interacts with others) and 80% unit tests.</p>

<h2 id="paper-edition">Paper edition</h2>

<p>I read a paper edition, found on Amazon. The overall quality is quite good, but the lack of
emphasis/bold is disturbing on the code samples. Some lines are somewhat bold, but a
vertical line or some ninja-stylized thing could make the UX better.
This is one of the limit of using Markdown for publishing.</p>

<p>But this print edition is way better that the previous book I read (&ldquo;Notes a software team leader&rdquo; by Roy Osherove) where some markdown content was not parsed at all&hellip;</p>

<h2 id="links">Links</h2>

<p>Author&rsquo;s blog: <a href="http://blog.jayfields.com/">http://blog.jayfields.com/</a></p>

<p>The book: <a href="http://signup.wewut.com/">http://signup.wewut.com/</a></p>


            <div class="written-by clearfix">
                <div class="avatar"></div>
                <div class="author">
                    Written by: <h4><a href="https://www.tomsquest.com/about">Thomas Queste</a></h4>
                </div>
            </div>

        </section>

        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "tomsquest" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </article>
</div>

    </div>
</div>


    <footer>
    <div class="links">
        <a href="https://twitter.com/ThomasQueste" title="View Thomas Queste's profile on Twitter"><img
                alt="View Thomas Queste's profile on Twitter" border="0" height="48" src="/img/tw-48.png"
                width="48"></a>
        <a href="https://www.linkedin.com/in/thomasqueste" title="View Thomas Queste's profile on LinkedIn"><img
                alt="View Thomas Queste's profile on LinkedIn" border="0" height="48" src="/img/li-48.png"
                width="48"></a>
        <a href="https://github.com/tomsquest" title="View Thomas Queste's profile on Github"><img
                alt="View Thomas Queste's profile on Github" border="0" height="48" src="/img/gh-48.png" width="48"></a>
    </div>
    <p>
        This work by
        <a href="https://www.tomsquest.com" property="cc:attributionName" rel="cc:attributionURL">Thomas
            Queste</a> is licensed under the following
        <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US" rel="license">License</a>.
        <br/>
        <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US" rel="license"><img
                alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png"
                style="border-width:0"/></a>
    </p>
</footer>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-5368525-1', 'auto');
	
	ga('send', 'pageview');
}
</script>



</body>
</html>
