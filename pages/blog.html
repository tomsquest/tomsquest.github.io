---
layout: page
permalink: /blog/
title: Blog
class: blog
---

<p class="filters">
  Filter by language:
  <a data-filter="lang" data-lang="en">English</a>
  <a data-filter="lang" data-lang="fr">French</a>
</p>

<ul>
  {%- for post in site.posts -%}
  <li data-lang="{{ post.lang | default: 'en' }}">
    <time datetime="{{ post.date | date_to_xmlschema }}">
      {{ post.date | date: "%Y-%m-%d" }}
    </time>
    <h2>
      <a href="{{ post.url | relative_url }}">
        {{ post.title | escape }}
      </a>
    </h2>
    <p class="excerpt">
      {%- if post.excerpt -%}
        {{ post.excerpt | strip_html }}
      {%- endif -%}
    </p>
  </li>
  {%- endfor -%}
</ul>

<script>
const itemsSelector = '.blog li';
let activeFilters = {};

function filterItems() {
  document.querySelectorAll(itemsSelector).forEach(item => {
    const matches = Object.keys(activeFilters).every(filter => {
      return !activeFilters[filter] || item.getAttribute(`data-${filter}`) === activeFilters[filter];
    });
    item.style.display = matches ? 'block' : 'none';
  });
}

function filterBy(link) {
  const filterType = link.getAttribute('data-filter');
  const filterValue = link.getAttribute(`data-${filterType}`);

  if (link.classList.contains('active')) {
    link.classList.remove('active');
    activeFilters[filterType] = null;
  } else {
    document.querySelectorAll(`[data-filter="${filterType}"]`).forEach(a => a.classList.remove('active'));
    link.classList.add('active');
    activeFilters[filterType] = filterValue;
  }
  filterItems();
}

document.querySelectorAll('[data-filter]').forEach(link => {
  link.addEventListener('click', function(e) {
    e.preventDefault();
    filterBy(this);
  });
});
</script>